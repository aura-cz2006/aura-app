import 'dart:collection';

import 'package:aura/models/amenity_category.dart';
import 'package:aura/models/taxi.dart';
import 'package:aura/util/manager.dart';
import 'package:flutter/material.dart';
import 'package:latlong2/latlong.dart';

Map<String, dynamic> MapCategory = {};

class MapManager extends Manager {
  Map<String, dynamic> _taxiData = {};
  /* {
    "type": "FeatureCollection",
    "crs": {
      "type": "link",
      "properties": {
        "href": "http://spatialreference.org/ref/epsg/4326/ogcwkt/",
        "type": "ogcwkt"
      }
    },
    "features": [
      {
        "type": "Feature",
        "geometry": {
          "type": "MultiPoint",
          "coordinates": [
            // [103.685979, 1.353944],
            [103.674792366667, 1.31203413333333],
            [103.685645583333, 1.34064276666667],
            [103.68721, 1.31322],
            [103.687505433333, 1.34220098333333],
            [103.6876, 1.34],
            [103.68886, 1.34],
            [103.689035166667, 1.34259733333333],
            [103.69065, 1.34],
            [103.69212, 1.34736],
            [103.69323, 1.34],
            [103.69355, 1.34],
            [103.69463, 1.34],
            [103.695629, 1.34089416666667],
            [103.696364333333, 1.341929],
            [103.696414333333, 1.339614],
            [103.69645, 1.35],
            [103.698251783333, 1.34112558333333],
            [103.698918, 1.334998],
            [103.699571833333, 1.347745],
            [103.70024, 1.34],
            [103.7004141, 1.33978898333333],
            [103.7006861, 1.34518685],
            [103.7012, 1.35],
            [103.70121, 1.34],
            [103.70121, 1.35],
            [103.701997166667, 1.352062],
            [103.70291, 1.34],
            [103.703842333333, 1.34457883333333],
            [103.70399, 1.35],
            [103.7041565, 1.341296],
            [103.70416, 1.34],
            [103.70419, 1.34],
            [103.704243666667, 1.353192],
            [103.70445, 1.34],
            [103.706332166667, 1.3442325],
            [103.70647, 1.34077],
            [103.70843, 1.35],
            [103.7092, 1.36625],
            [103.7113, 1.34],
            [103.711904333333, 1.346817],
            [103.71252, 1.37],
            [103.71396, 1.34937],
            [103.715819, 1.35259216666667],
            [103.71613, 1.35],
            [103.71888, 1.35],
            [103.989296516667, 1.36140416666667]
          ]
        },
        "properties": {
          "timestamp": "2022-04-06T00:56:25+08:00",
          "taxi_count": 1243,
          "api_info": {"status": "healthy"}
        }
      }
    ]
  }; */

  Map<String, dynamic> dengueData = {};
  // {
  //   "type": "FeatureCollection",
  //   "crs": {
  //     "type": "name",
  //     "properties": {"name": "urn:ogc:def:crs:OGC:1.3:CRS84"}
  //   },
  //   "features": [
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_1",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Hougang Ave 3 (Blk 24)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>13379104E0CB0133<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20210930143245<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.892179908310993, 1.36430980124397, 0.0],
  //             [103.892083973767996, 1.36442721625749, 0.0],
  //             [103.890948220989998, 1.36564334921971, 0.0],
  //             [103.891508127058003, 1.366168358655, 0.0],
  //             [103.891610123096001, 1.36626048371262, 0.0],
  //             [103.891673389141999, 1.36631967639853, 0.0],
  //             [103.892278132673994, 1.36689657422363, 0.0],
  //             [103.892998115812006, 1.36760449322957, 0.0],
  //             [103.893662696522995, 1.36760242089422, 0.0],
  //             [103.894430920085995, 1.36760484312234, 0.0],
  //             [103.894464764828996, 1.36654457247778, 0.0],
  //             [103.894391535555002, 1.36634986301789, 0.0],
  //             [103.894337106045995, 1.36622253993445, 0.0],
  //             [103.894240462509998, 1.36601649757935, 0.0],
  //             [103.893649659434999, 1.36472987959855, 0.0],
  //             [103.893450773802002, 1.36436014631084, 0.0],
  //             [103.892179908310993, 1.36430980124397, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_2",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Joo Chiat Rd \/ Onan Rd<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td>Plastic container, Flowerpot plate, Pail cover<\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>793519D48F10C1C6<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.897579149215005, 1.31615485102407, 0.0],
  //             [103.898169332546999, 1.31630539871273, 0.0],
  //             [103.899559654746, 1.3165752703104, 0.0],
  //             [103.899730539640998, 1.31567285960958, 0.0],
  //             [103.899987214212999, 1.31435840836963, 0.0],
  //             [103.900067453204002, 1.31437036914144, 0.0],
  //             [103.900388881647004, 1.31394029827973, 0.0],
  //             [103.900765199190005, 1.31339229319788, 0.0],
  //             [103.899880764846998, 1.31323762286203, 0.0],
  //             [103.899692984224998, 1.31320234592928, 0.0],
  //             [103.899782561753, 1.31307643344332, 0.0],
  //             [103.899254266848999, 1.31269239121258, 0.0],
  //             [103.898106668081994, 1.31185706024153, 0.0],
  //             [103.896410033614998, 1.31593025237712, 0.0],
  //             [103.897579149215005, 1.31615485102407, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_3",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Hougang Ave 8 (Blk 626, 629, 630)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>C06458D3994A29EE<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.879941925165994, 1.36928762008826, 0.0],
  //             [103.880032330966998, 1.36969455407701, 0.0],
  //             [103.880246524873002, 1.37066329190145, 0.0],
  //             [103.880402947050996, 1.37089065315069, 0.0],
  //             [103.880523944155996, 1.37098760399798, 0.0],
  //             [103.88067498369, 1.37106479027096, 0.0],
  //             [103.880838510863001, 1.37110630274369, 0.0],
  //             [103.881013300898005, 1.37111115387295, 0.0],
  //             [103.883129107491001, 1.37063827108093, 0.0],
  //             [103.882931646852001, 1.36981741480104, 0.0],
  //             [103.883166249767996, 1.3697624535152, 0.0],
  //             [103.882921149460003, 1.36862221847402, 0.0],
  //             [103.879941925165994, 1.36928762008826, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_4",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Florence Rd \/ Hougang Ave 2 \/ Hougang Ave 2 (Blk 701, 702, 705, 706, 707, 708, 709, 710, 711, 712) \/ Jln Arif \/ Jln Tani \/ Lim Ah Pin Rd<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>153<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td>Hardened soil, Container, Flower pot plate, Fish bowl, Flower trough, Vase, Mop pail, Gully trap, Unused flower pot, Watering can, Discarded glass bottle, Dish tray, Procelain vase, Stryrofoam box, Blue drum<\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td>Fish bowl, Discarded plastic tray<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td>Gully trap, Carpark drain, Ground depression, Washbasin cover, Outlet pipe, Discarded plastic cup<\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>58AE9B6318BA11FB<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.885456453038998, 1.36809758808614, 0.0],
  //             [103.887162202474997, 1.36776456611312, 0.0],
  //             [103.888675650907004, 1.36733469003516, 0.0],
  //             [103.889085666268997, 1.36718408852911, 0.0],
  //             [103.889466605980999, 1.36700754867408, 0.0],
  //             [103.889762244503004, 1.36683116361618, 0.0],
  //             [103.889889764477999, 1.36673650444915, 0.0],
  //             [103.890944475126005, 1.36565458512665, 0.0],
  //             [103.889644833171999, 1.36440571039484, 0.0],
  //             [103.889239554930995, 1.36406181021214, 0.0],
  //             [103.888392876034004, 1.36324021071788, 0.0],
  //             [103.887281717053, 1.36443788337032, 0.0],
  //             [103.886854188209, 1.36406769793407, 0.0],
  //             [103.886335855743994, 1.36460593172899, 0.0],
  //             [103.885946496656999, 1.3642487545554, 0.0],
  //             [103.885698618659006, 1.36450027265453, 0.0],
  //             [103.885290000686993, 1.36414371075853, 0.0],
  //             [103.885222808826995, 1.36424392207446, 0.0],
  //             [103.884686986600002, 1.36357103620662, 0.0],
  //             [103.883723619281, 1.36485094153382, 0.0],
  //             [103.883465370169006, 1.36482093021985, 0.0],
  //             [103.883387522049006, 1.36539696648589, 0.0],
  //             [103.883336381890999, 1.36587834241213, 0.0],
  //             [103.883409330353004, 1.36626756647457, 0.0],
  //             [103.883063719022005, 1.36634303744546, 0.0],
  //             [103.883182112263, 1.36689136079782, 0.0],
  //             [103.883181308505002, 1.36708803465471, 0.0],
  //             [103.883071173190004, 1.36719917695369, 0.0],
  //             [103.883071175721994, 1.36732220572294, 0.0],
  //             [103.883273272272007, 1.36733549655567, 0.0],
  //             [103.883242495361003, 1.36768250436418, 0.0],
  //             [103.883390277399997, 1.36853762441189, 0.0],
  //             [103.883915310838006, 1.36841648553475, 0.0],
  //             [103.885456453038998, 1.36809758808614, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_5",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Telok Blangah Hts (Blk 85, 87)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>F5A28B69B56069BF<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.806745649546002, 1.27556231608095, 0.0],
  //             [103.806700222253994, 1.27599825113174, 0.0],
  //             [103.806536524478005, 1.27675042234589, 0.0],
  //             [103.806565367673997, 1.27708192753864, 0.0],
  //             [103.806652116853996, 1.2775236310992, 0.0],
  //             [103.806854966174001, 1.27812905303395, 0.0],
  //             [103.806951393003999, 1.27818728608604, 0.0],
  //             [103.807080469580995, 1.2781970021045, 0.0],
  //             [103.808077812893998, 1.27790276168461, 0.0],
  //             [103.808898712181005, 1.27769050257669, 0.0],
  //             [103.809026947224993, 1.27765645717617, 0.0],
  //             [103.809411170982003, 1.27752618885256, 0.0],
  //             [103.810407085967995, 1.27713543186752, 0.0],
  //             [103.810025526901995, 1.27622104134857, 0.0],
  //             [103.809865590230004, 1.27590712578568, 0.0],
  //             [103.809341233981996, 1.2759071209186, 0.0],
  //             [103.809341237373999, 1.27554092005877, 0.0],
  //             [103.806745649546002, 1.27556231608095, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_6",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Boon Lay Dr (Blk 257, 262)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>BEE1D5B62144DE5C<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.706174150329005, 1.34651794075411, 0.0],
  //             [103.706699760898005, 1.34648377615841, 0.0],
  //             [103.706710399426996, 1.34670080466068, 0.0],
  //             [103.707610329575004, 1.34666151177859, 0.0],
  //             [103.707624590758996, 1.34725487997832, 0.0],
  //             [103.707985474696002, 1.34724051390171, 0.0],
  //             [103.708257021262, 1.34743472165865, 0.0],
  //             [103.708431740324997, 1.34719804097918, 0.0],
  //             [103.709194716116002, 1.34772027258531, 0.0],
  //             [103.709377716942001, 1.34746981158308, 0.0],
  //             [103.709621933923003, 1.34762898461144, 0.0],
  //             [103.709850628905997, 1.34729455224196, 0.0],
  //             [103.709622043284995, 1.34713541982855, 0.0],
  //             [103.710148536713007, 1.34641483988998, 0.0],
  //             [103.709952740229994, 1.3461177496061, 0.0],
  //             [103.709765899269001, 1.34590132255792, 0.0],
  //             [103.709463834282005, 1.34566702122166, 0.0],
  //             [103.709307145658002, 1.34555324985395, 0.0],
  //             [103.707228030809006, 1.34411199157561, 0.0],
  //             [103.705784929657995, 1.34623612645448, 0.0],
  //             [103.706174150329005, 1.34651794075411, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_7",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Lor 14 Geylang (Central Imperial) \/ Lor 16, 18 Geylang<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>867F760F30008EED<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.877508389932004, 1.31231701907628, 0.0],
  //             [103.878467826383996, 1.31250930679704, 0.0],
  //             [103.879330520210004, 1.31262741725197, 0.0],
  //             [103.879737183542005, 1.31266149428199, 0.0],
  //             [103.880587108456993, 1.31279433030054, 0.0],
  //             [103.881225562202005, 1.31290766116168, 0.0],
  //             [103.882111184970995, 1.31309419169488, 0.0],
  //             [103.882186967289002, 1.31047728343205, 0.0],
  //             [103.880138831348006, 1.31004404540871, 0.0],
  //             [103.879498500123006, 1.30991520713573, 0.0],
  //             [103.879142637365007, 1.30982091472288, 0.0],
  //             [103.878639726196994, 1.30961947041142, 0.0],
  //             [103.878364991275006, 1.3111159607056, 0.0],
  //             [103.877752670741003, 1.31101173466677, 0.0],
  //             [103.877508389932004, 1.31231701907628, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_8",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Lor 2 Toa Payoh (Blk 99C, 101A, 101B, 116)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>6<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>F9300AEADDE77E32<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211006160646<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.845777996799995, 1.34088085059897, 0.0],
  //             [103.846034403664007, 1.34091315226875, 0.0],
  //             [103.846324690559996, 1.3409135106729, 0.0],
  //             [103.847078363566993, 1.34087503667514, 0.0],
  //             [103.847763121566004, 1.34084524113536, 0.0],
  //             [103.849117098654006, 1.34077576035349, 0.0],
  //             [103.849162635835995, 1.34077221133146, 0.0],
  //             [103.849338731830002, 1.34075282874442, 0.0],
  //             [103.849507339230996, 1.34073427007049, 0.0],
  //             [103.849508896719996, 1.3396821315279, 0.0],
  //             [103.849099482346006, 1.33950363798726, 0.0],
  //             [103.849101363819997, 1.33836153325086, 0.0],
  //             [103.849011495553, 1.33810797987168, 0.0],
  //             [103.848848719773002, 1.33780854311653, 0.0],
  //             [103.848053029417002, 1.33801067441904, 0.0],
  //             [103.847151980876006, 1.33832892284649, 0.0],
  //             [103.846424485792994, 1.33859931376015, 0.0],
  //             [103.846544310297006, 1.3389137271872, 0.0],
  //             [103.843924295701001, 1.3389172217888, 0.0],
  //             [103.844109024676001, 1.33944948470566, 0.0],
  //             [103.844324066176995, 1.33988018914487, 0.0],
  //             [103.844481335729995, 1.34010271816584, 0.0],
  //             [103.844647163022998, 1.34028863755728, 0.0],
  //             [103.844841520429, 1.34045840666113, 0.0],
  //             [103.845054063700005, 1.34060520389911, 0.0],
  //             [103.845456328232004, 1.34080368551485, 0.0],
  //             [103.845777996799995, 1.34088085059897, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_9",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Hougang Ave 8 (Blk 614)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>A2564D1AF555F617<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211006160646<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.883130372802, 1.3706442886921, 0.0],
  //             [103.884219479866999, 1.37040319840765, 0.0],
  //             [103.884470055829993, 1.37039251430865, 0.0],
  //             [103.884710106921005, 1.37047014335577, 0.0],
  //             [103.884908135307995, 1.370623236127, 0.0],
  //             [103.885419092161996, 1.37133633311992, 0.0],
  //             [103.885721756414995, 1.37111285182411, 0.0],
  //             [103.885574431281, 1.37090496622077, 0.0],
  //             [103.885385428975994, 1.37062729266064, 0.0],
  //             [103.885553701576995, 1.37050465632472, 0.0],
  //             [103.885596741241002, 1.3704193114628, 0.0],
  //             [103.885628499571993, 1.37030259808161, 0.0],
  //             [103.886599167994007, 1.37008527419588, 0.0],
  //             [103.887403179610999, 1.36899736872101, 0.0],
  //             [103.887214690449994, 1.36880509889664, 0.0],
  //             [103.887067885085003, 1.36861388983969, 0.0],
  //             [103.886889640193004, 1.36812091694974, 0.0],
  //             [103.886820586073, 1.36783844043408, 0.0],
  //             [103.885791027617003, 1.36803191940645, 0.0],
  //             [103.885465267967007, 1.36809586779324, 0.0],
  //             [103.882926809525003, 1.36862104630057, 0.0],
  //             [103.883166249767996, 1.3697624535152, 0.0],
  //             [103.882935289751003, 1.36982205411221, 0.0],
  //             [103.883130372802, 1.3706442886921, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_10",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Robey Cres \/ Robey Cres (D'zire)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>4<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>13B20E5EE694DFD2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211005160716<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.880350400747005, 1.36920053447097, 0.0],
  //             [103.881274091204006, 1.36898549448471, 0.0],
  //             [103.882423991126004, 1.36873250509827, 0.0],
  //             [103.883388523171007, 1.36852695024103, 0.0],
  //             [103.883250266125998, 1.36767951708741, 0.0],
  //             [103.883278535111998, 1.36733168816886, 0.0],
  //             [103.883071175721994, 1.36732220572294, 0.0],
  //             [103.883071173184007, 1.36719888574849, 0.0],
  //             [103.883184276416998, 1.36708504747853, 0.0],
  //             [103.883184272635006, 1.3669016478928, 0.0],
  //             [103.883066852317995, 1.36634240975159, 0.0],
  //             [103.882881323796994, 1.36637953141973, 0.0],
  //             [103.882797811217003, 1.36600362612565, 0.0],
  //             [103.882307690174997, 1.36611747123512, 0.0],
  //             [103.881791312242996, 1.36628796613886, 0.0],
  //             [103.881121556097, 1.36611316426876, 0.0],
  //             [103.880804645590004, 1.36608190039593, 0.0],
  //             [103.880655109353, 1.36676889172202, 0.0],
  //             [103.880662497421994, 1.36690836892209, 0.0],
  //             [103.880077021502004, 1.36705665274916, 0.0],
  //             [103.880149300371997, 1.36792622173732, 0.0],
  //             [103.880225014795997, 1.36848524290519, 0.0],
  //             [103.880350400747005, 1.36920053447097, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_11",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Lor 6, 7 Realty Pk<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>8<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>D0F67F243EFB1294<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211005160716<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.888433021864003, 1.36984875035578, 0.0],
  //             [103.889566236093998, 1.36845267818414, 0.0],
  //             [103.889369368388003, 1.36829207865033, 0.0],
  //             [103.889184695414002, 1.36817992739446, 0.0],
  //             [103.889747966715007, 1.36762121260971, 0.0],
  //             [103.890363840001996, 1.3672920022857, 0.0],
  //             [103.890206780697994, 1.36697674750654, 0.0],
  //             [103.891671898404994, 1.36631917089557, 0.0],
  //             [103.890952512997998, 1.36566205769134, 0.0],
  //             [103.889904702825007, 1.36672118055376, 0.0],
  //             [103.889747050859, 1.36684215290074, 0.0],
  //             [103.889432530893004, 1.36702654111672, 0.0],
  //             [103.889025409713994, 1.36720927375724, 0.0],
  //             [103.888702729122997, 1.36732765074277, 0.0],
  //             [103.888267797558001, 1.36745053671868, 0.0],
  //             [103.887477349351002, 1.3676750522758, 0.0],
  //             [103.886821718253998, 1.36783772143938, 0.0],
  //             [103.886897373414996, 1.36816749875192, 0.0],
  //             [103.887056577649005, 1.3686212317207, 0.0],
  //             [103.887208803307004, 1.36881785236935, 0.0],
  //             [103.887410374579005, 1.36900275766215, 0.0],
  //             [103.888306288232002, 1.36968117465982, 0.0],
  //             [103.888433021864003, 1.36984875035578, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_12",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Bishan St 11 (Bishan Loft) \/ Bishan St 13 (Blk 167, 171, 172)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>4<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>F4FCC6271B6958A7<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211005160716<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.854171872167996, 1.35010930925877, 0.0],
  //             [103.854503132865005, 1.35001140622247, 0.0],
  //             [103.855198537434006, 1.34985467187566, 0.0],
  //             [103.856538822771995, 1.34953761274458, 0.0],
  //             [103.856632730133995, 1.34938686515391, 0.0],
  //             [103.856654127113003, 1.34933482149143, 0.0],
  //             [103.856702886682001, 1.3490484043038, 0.0],
  //             [103.856722418597002, 1.34875134755073, 0.0],
  //             [103.856723660792994, 1.34860322169847, 0.0],
  //             [103.856759448400993, 1.34847399220531, 0.0],
  //             [103.856776557223995, 1.34840043104155, 0.0],
  //             [103.856921570319997, 1.3472285551784, 0.0],
  //             [103.857043058117995, 1.3462498969793, 0.0],
  //             [103.856469708510005, 1.34635272242229, 0.0],
  //             [103.855601763143994, 1.3465028785579, 0.0],
  //             [103.855530555523998, 1.34618257685601, 0.0],
  //             [103.855671269140004, 1.34615778874357, 0.0],
  //             [103.855580029364006, 1.34568004100226, 0.0],
  //             [103.854238708981001, 1.34598846562154, 0.0],
  //             [103.853241729896993, 1.34621771230721, 0.0],
  //             [103.852696829685996, 1.34634630648989, 0.0],
  //             [103.852433263311994, 1.34642657363669, 0.0],
  //             [103.852273843060999, 1.34652547437172, 0.0],
  //             [103.852178271987995, 1.34663592514277, 0.0],
  //             [103.851660159272001, 1.34744915078017, 0.0],
  //             [103.851494339639004, 1.34758513045363, 0.0],
  //             [103.851334983645998, 1.34763973988008, 0.0],
  //             [103.851255331635997, 1.34765755192818, 0.0],
  //             [103.849874736139, 1.34796628554126, 0.0],
  //             [103.849974162457002, 1.34842304857546, 0.0],
  //             [103.850445537694, 1.34832004903336, 0.0],
  //             [103.850596748187002, 1.34901677753166, 0.0],
  //             [103.851477841236999, 1.34881187376074, 0.0],
  //             [103.852140490357002, 1.3487699604523, 0.0],
  //             [103.853021691031003, 1.34935032657332, 0.0],
  //             [103.853307183336995, 1.34891627002174, 0.0],
  //             [103.854016977043003, 1.34937254482613, 0.0],
  //             [103.853385139362004, 1.35038289789739, 0.0],
  //             [103.853731414829994, 1.35025053403681, 0.0],
  //             [103.854171872167996, 1.35010930925877, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_13",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Hougang Ave 3 (Blk 22)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>940452F9394C3896<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211005160716<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.888837691982005, 1.36354884266072, 0.0],
  //             [103.888755249102999, 1.36357940302854, 0.0],
  //             [103.889245255261997, 1.36405388423367, 0.0],
  //             [103.889691751529, 1.36442858698259, 0.0],
  //             [103.890675219082993, 1.3653876559499, 0.0],
  //             [103.890932769862999, 1.36563309320182, 0.0],
  //             [103.892018197490998, 1.36445564926369, 0.0],
  //             [103.892352935472999, 1.3640450363236, 0.0],
  //             [103.892490209876996, 1.36383289539987, 0.0],
  //             [103.892624905790001, 1.36356455465028, 0.0],
  //             [103.892751378547004, 1.36324583108371, 0.0],
  //             [103.892807524906999, 1.36303722550627, 0.0],
  //             [103.891126834912995, 1.36308705553166, 0.0],
  //             [103.891136833055, 1.36326637255926, 0.0],
  //             [103.890726281593004, 1.36328407451229, 0.0],
  //             [103.890722361466004, 1.36318387108831, 0.0],
  //             [103.890732639562003, 1.36289213752322, 0.0],
  //             [103.890075723107998, 1.362856607164, 0.0],
  //             [103.889737689382997, 1.36259123408896, 0.0],
  //             [103.889255551822004, 1.36311383298773, 0.0],
  //             [103.888837691982005, 1.36354884266072, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_14",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Aroozoo Ave \/ Hougang Ave 1 (Blk 122) \/ Jln Pelikat (The Promenade @ Pelikat)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>FCAF3235FC7F0CD7<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211001154216<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.888520909874998, 1.35518981586092, 0.0],
  //             [103.887940753837995, 1.35488446426201, 0.0],
  //             [103.888181768913, 1.35397991301979, 0.0],
  //             [103.887029470380995, 1.35366611110098, 0.0],
  //             [103.887088136675999, 1.35341905020669, 0.0],
  //             [103.885552599587996, 1.35303573851983, 0.0],
  //             [103.885390925779006, 1.35372306230081, 0.0],
  //             [103.885251893952997, 1.35365218486472, 0.0],
  //             [103.884981977769002, 1.35419768044318, 0.0],
  //             [103.884859371662998, 1.35476420835323, 0.0],
  //             [103.884715127918, 1.35506772957086, 0.0],
  //             [103.885007638931995, 1.3552140277047, 0.0],
  //             [103.884411430919002, 1.35638934378641, 0.0],
  //             [103.884429038731994, 1.35645271943464, 0.0],
  //             [103.884961952683, 1.35671582462452, 0.0],
  //             [103.886131463601998, 1.35728006629159, 0.0],
  //             [103.887575816066999, 1.35798231977861, 0.0],
  //             [103.887875631249997, 1.35741199303713, 0.0],
  //             [103.888123045759002, 1.35736905815596, 0.0],
  //             [103.888376541265998, 1.35750346978755, 0.0],
  //             [103.888525243941999, 1.35758231696587, 0.0],
  //             [103.888639811458006, 1.35736386069602, 0.0],
  //             [103.888799676990999, 1.35708689374136, 0.0],
  //             [103.888839045938994, 1.35701288873, 0.0],
  //             [103.888916127806993, 1.35686639626652, 0.0],
  //             [103.888962085618004, 1.35677892421729, 0.0],
  //             [103.889042188258003, 1.35662415855873, 0.0],
  //             [103.889203628123994, 1.3567842091456, 0.0],
  //             [103.889374017022007, 1.35687487037916, 0.0],
  //             [103.889461931916003, 1.35692169629346, 0.0],
  //             [103.889538329250996, 1.35697915417625, 0.0],
  //             [103.889752596576002, 1.35701660972025, 0.0],
  //             [103.889980204005994, 1.35570160221747, 0.0],
  //             [103.889988759898003, 1.35557526237228, 0.0],
  //             [103.889417456958, 1.35557383962504, 0.0],
  //             [103.889300485893003, 1.35555589614991, 0.0],
  //             [103.889158551164996, 1.3555099577574, 0.0],
  //             [103.888520909874998, 1.35518981586092, 0.0]
  //           ]
  //         ]
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "properties": {
  //         "Name": "kml_15",
  //         "Description":
  //             "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Compassvale Lk (Blk 277A, 277B)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>F5E0329826EC2E99<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20210930143245<\/td> <\/tr><\/table><\/center>"
  //       },
  //       "geometry": {
  //         "type": "Polygon",
  //         "coordinates": [
  //           [
  //             [103.896836394684001, 1.38320791800205, 0.0],
  //             [103.89661010895, 1.3822112005048, 0.0],
  //             [103.896257870333002, 1.38230869308848, 0.0],
  //             [103.896164174920003, 1.38196097951945, 0.0],
  //             [103.895988765135996, 1.38131001508476, 0.0],
  //             [103.895543631888998, 1.38140231626009, 0.0],
  //             [103.894862038751995, 1.38152759300844, 0.0],
  //             [103.894571760112996, 1.38154210383496, 0.0],
  //             [103.894472902882995, 1.38004199132373, 0.0],
  //             [103.893482683973005, 1.38005367940298, 0.0],
  //             [103.892867711595997, 1.38004469836165, 0.0],
  //             [103.892891818609996, 1.38048129199963, 0.0],
  //             [103.893023103901001, 1.38192411778045, 0.0],
  //             [103.893060114549996, 1.38239834888966, 0.0],
  //             [103.893177085401007, 1.38389711169473, 0.0],
  //             [103.893339783065997, 1.38389129340448, 0.0],
  //             [103.893329051996005, 1.38377265201491, 0.0],
  //             [103.893559285264999, 1.38375132305743, 0.0],
  //             [103.893694264708998, 1.3837153331658, 0.0],
  //             [103.893774612743002, 1.38368569058775, 0.0],
  //             [103.893927656691005, 1.38363230659332, 0.0],
  //             [103.895170900869005, 1.38359956800111, 0.0],
  //             [103.896836394684001, 1.38320791800205, 0.0]
  //           ]
  //         ]
  //       }
  //     }
  //   ]
  //   //   {
  //   //     "type": "Feature",
  //   //     "properties": {
  //   //       "Name": "kml_1",
  //   //       "Description":
  //   //           "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Hougang Ave 3 (Blk 24)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>2<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>13379104E0CB0133<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20210930143245<\/td> <\/tr><\/table><\/center>"
  //   //     },
  //   //     "geometry": {
  //   //       "type": "Polygon",
  //   //       "coordinates": [
  //   //         [
  //   //           [103.892179908310993, 1.36430980124397, 0.0],
  //   //           [103.892083973767996, 1.36442721625749, 0.0],
  //   //           [103.890948220989998, 1.36564334921971, 0.0],
  //   //           [103.891508127058003, 1.366168358655, 0.0],
  //   //           [103.891610123096001, 1.36626048371262, 0.0],
  //   //           [103.891673389141999, 1.36631967639853, 0.0],
  //   //           [103.892278132673994, 1.36689657422363, 0.0],
  //   //           [103.892998115812006, 1.36760449322957, 0.0],
  //   //           [103.893662696522995, 1.36760242089422, 0.0],
  //   //           [103.894430920085995, 1.36760484312234, 0.0],
  //   //           [103.894464764828996, 1.36654457247778, 0.0],
  //   //           [103.894391535555002, 1.36634986301789, 0.0],
  //   //           [103.894337106045995, 1.36622253993445, 0.0],
  //   //           [103.894240462509998, 1.36601649757935, 0.0],
  //   //           [103.893649659434999, 1.36472987959855, 0.0],
  //   //           [103.893450773802002, 1.36436014631084, 0.0],
  //   //           [103.892179908310993, 1.36430980124397, 0.0]
  //   //         ]
  //   //       ]
  //   //     }
  //   //   },
  //   //   {
  //   //     "type": "Feature",
  //   //     "properties": {
  //   //       "Name": "kml_2",
  //   //       "Description":
  //   //           "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Joo Chiat Rd \/ Onan Rd<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td>Plastic container, Flowerpot plate, Pail cover<\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>793519D48F10C1C6<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //   //     },
  //   //     "geometry": {
  //   //       "type": "Polygon",
  //   //       "coordinates": [
  //   //         [
  //   //           [103.897579149215005, 1.31615485102407, 0.0],
  //   //           [103.898169332546999, 1.31630539871273, 0.0],
  //   //           [103.899559654746, 1.3165752703104, 0.0],
  //   //           [103.899730539640998, 1.31567285960958, 0.0],
  //   //           [103.899987214212999, 1.31435840836963, 0.0],
  //   //           [103.900067453204002, 1.31437036914144, 0.0],
  //   //           [103.900388881647004, 1.31394029827973, 0.0],
  //   //           [103.900765199190005, 1.31339229319788, 0.0],
  //   //           [103.899880764846998, 1.31323762286203, 0.0],
  //   //           [103.899692984224998, 1.31320234592928, 0.0],
  //   //           [103.899782561753, 1.31307643344332, 0.0],
  //   //           [103.899254266848999, 1.31269239121258, 0.0],
  //   //           [103.898106668081994, 1.31185706024153, 0.0],
  //   //           [103.896410033614998, 1.31593025237712, 0.0],
  //   //           [103.897579149215005, 1.31615485102407, 0.0]
  //   //         ]
  //   //       ]
  //   //     }
  //   //   },
  //   //   {
  //   //     "type": "Feature",
  //   //     "properties": {
  //   //       "Name": "kml_3",
  //   //       "Description":
  //   //           "<center><table><tr><th colspan='2' align='center'><em>Attributes<\/em><\/th><\/tr><tr bgcolor=\"#E3E3F3\"> <th>LOCALITY<\/th> <td>Hougang Ave 8 (Blk 626, 629, 630)<\/td> <\/tr><tr bgcolor=\"\"> <th>CASE_SIZE<\/th> <td>3<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>NAME<\/th> <td>Dengue_Cluster<\/td> <\/tr><tr bgcolor=\"\"> <th>HYPERLINK<\/th> <td>https:\/\/www.nea.gov.sg\/dengue-zika\/dengue\/dengue-clusters<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>HOMES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>PUBLIC_PLACES<\/th> <td><\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>CONSTRUCTION_SITES<\/th> <td><\/td> <\/tr><tr bgcolor=\"\"> <th>INC_CRC<\/th> <td>C06458D3994A29EE<\/td> <\/tr><tr bgcolor=\"#E3E3F3\"> <th>FMEL_UPD_D<\/th> <td>20211007160145<\/td> <\/tr><\/table><\/center>"
  //   //     },
  //   //     "geometry": {
  //   //       "type": "Polygon",
  //   //       "coordinates": [
  //   //         [
  //   //           [103.879941925165994, 1.36928762008826, 0.0],
  //   //           [103.880032330966998, 1.36969455407701, 0.0],
  //   //           [103.880246524873002, 1.37066329190145, 0.0],
  //   //           [103.880402947050996, 1.37089065315069, 0.0],
  //   //           [103.880523944155996, 1.37098760399798, 0.0],
  //   //           [103.88067498369, 1.37106479027096, 0.0],
  //   //           [103.880838510863001, 1.37110630274369, 0.0],
  //   //           [103.881013300898005, 1.37111115387295, 0.0],
  //   //           [103.883129107491001, 1.37063827108093, 0.0],
  //   //           [103.882931646852001, 1.36981741480104, 0.0],
  //   //           [103.883166249767996, 1.3697624535152, 0.0],
  //   //           [103.882921149460003, 1.36862221847402, 0.0],
  //   //           [103.879941925165994, 1.36928762008826, 0.0]
  //   //         ]
  //   //       ]
  //   //     }
  //   //   },
  //   // ]
  // };

  late List<AmenityCategory> categories = AmenityCategory.values.toList();

  List<AmenityCategory> selectedCategories = [];

  Map<AmenityCategory, List<dynamic>> amenitiesData = {};

  List<Map<String, dynamic>> busStopData = [];
  void setBusStopData(List<Map<String, dynamic>> newData) {
    busStopData = newData;
    notifyListeners();
  }
  Map<String, dynamic> getBusStopDataGeojson() {
    Map<String, dynamic> res = {};
      res = {
        "type": "FeatureCollection",
        "features": (busStopData)
            .map((b) => {
          "type": "Feature",
          "geometry": {
            "type": "Point",
            "coordinates": [b['Longitude'], b['Latitude']]
          }
        })
            .toList()
    };
    return res;
  }
  // {
  //   AmenityCategory.Pharmacies: [
  //     {"name": "Singapore General Hospital", "lat": 1.2804, "lng": 103.8348}
  //   ],
  //   AmenityCategory.HawkerCenters: [
  //     {"name": "Marina Bay Sands", "lat": 1.284, "lng": 103.8610}
  //   ]
  // };

  void updateAmenitiesData(AmenityCategory category, List<dynamic> fetchedAmenitiesData) {
    if (amenitiesData.keys.contains(category)) {
      amenitiesData.update(category, (value) => fetchedAmenitiesData);
    } else {
      amenitiesData[category] = fetchedAmenitiesData;
    }
    notifyListeners();
  }

  UnmodifiableMapView<String, dynamic> get taxiData =>
          UnmodifiableMapView(_taxiData);
  Map<AmenityCategory, Map<String, dynamic>> getAmenitiesGeojson() {
    Map<AmenityCategory, Map<String, dynamic>> res = {};
    for (AmenityCategory category in selectedCategories) {
      res[category] = {
        "type": "FeatureCollection",
        "features": (amenitiesData[category] ??
            [])
                .map((a) => {
                      "type": "Feature",
                      "geometry": {
                        "type": "Point",
                        "coordinates": [a['lng'], a['lat']]
                      }
                    })
                .toList()
      };
    }
    return res;
  }

  // UnmodifiableListView<String> get categories =>
  //     UnmodifiableListView(_categories);
  //
  // UnmodifiableListView<String> get selectedCategories =>
  //     UnmodifiableListView(_selectedCategories);

  // todo add updater functions
  void setSelectedCategory(AmenityCategory category) {
    if (selectedCategories.contains(category)) {
      selectedCategories.removeWhere((element) => element == category);
    } else {
      selectedCategories.add(category);
    }
    notifyListeners();
  }

  List<String> selectedLayers = ['taxis', 'meetups', 'dengue'];
  void toggleLayer(String layerName) {
    if (selectedLayers.contains(layerName)) {
      selectedLayers.removeWhere((element) => element == layerName);
    } else {
      selectedLayers.add(layerName);
    }
    notifyListeners();
  }

  bool isLayerEnabled(String layerName) {
    return selectedLayers.contains(layerName);
  }

  void setTaxiData(Map<String, dynamic> fetchedTaxiData) {
    _taxiData = fetchedTaxiData;
    notifyListeners();
  }
}
